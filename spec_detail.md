
将日常开发流程固化为 AI Agent 的专属技能（Skills），不仅能大幅减少重复的 Prompt 输入，还能强制模型遵循最佳实践，从而提高代码质量和开发效率。

将整个开发流程抽象为 **“规划 -> 审视 -> 执行 -> 优化 -> 归档”** 的五步标准工作流：

---

### 🛠️ 核心 Agent Skills 需求规范 (v2.0)

#### 1. 需求规划与约束 (Skill: `dev_plan`)

**目标：** 在写任何代码前，建立开发准则，并强制输出结构化的实施步骤。

* **行为规范 (Prompt 注入)：**
* **强规则：** **绝对禁止在这一步直接输出代码。** 必须先输出分析与规划，并以“请问是否同意按此计划执行？”结尾，等待用户授权。
* **前端准则：** 优先考虑组件复用性与状态管理的清晰度；注重交互细节（如 Loading 状态、错误提示）；保障 UI 布局的响应式与现代美观（例如合理的间距与对齐）。
* **后端准则：** 优先保证接口（如 RESTful API）的规范性与输入校验；注重异步处理性能与数据库查询优化；保持路由结构清晰、高内聚低耦合。


* **输出交付物：** 一份分步骤的 Markdown 格式开发计划（包含模块划分、技术选型建议、预计修改的文件列表）。

#### 2. 方案审视与补全 (Skill: `plan_review`)

**目标：** 扮演“资深架构师/产品经理”，对上一步生成的 `dev_plan` 进行“挑刺”和完善。

* **行为规范：**
* **寻找盲点：** 思考用户未提及但必不可少的边缘情况（Edge Cases）、异常处理机制或安全性考量。
* **合理性审查：** 评估计划的步骤顺序是否合理？是否存在过度设计？性能和交互美观度是否达标？
* **功能扩充：** 提出 1-3 个能显著提升用户体验或系统健壮性的“Bonus”建议。


* **输出交付物：** 优化后的最终版 Plan，并标明修改和补充的地方。

#### 3. 稳健批量实施 (Skill: `batch_execute`)

**目标：** 解决上下文丢失问题，将确认后的长计划转化为实际代码。

* **行为规范：**
* **状态持久化：** 第一步，强制要求模型将最终的 Plan 写入本地临时日志文件（如 `current_plan.md`）。
* **分步执行机制：** 读取 `current_plan.md`，执行第一步代码编写 -> 自我检查 -> 更新日志文件（打钩 `[x]`） -> 自动执行下一步。
* **防截断处理：** 如果实施过程过长导致输出截断，模型应具备根据 `current_plan.md` 的状态，从断点处继续生成的能力。



#### 4. 代码重构与净化 (Skill: `code_refactor`)

**目标：** 在功能跑通后，进行代码层面的“大扫除”，提升可维护性。

* **行为规范：**
* **前置审查：** 先阅读目标代码，指出存在的“代码坏味道”（Code Smells）。
* **清理与优化：** 清理未使用的变量、死代码（Dead Code）和多余的注释；提取重复逻辑为公共函数/组件。
* **交互调优：** 检查是否有可以提升的前端交互逻辑（如防抖/节流、更平滑的动画过渡）。


* **输出交付物：** 重构前后的对比说明，以及重构后的干净代码。

#### 5. 架构同步与 Git 管家 (Skill: `git_sync`)

**目标：** 收尾工作，确保文档与代码同步，并生成高质量的提交记录。（将文档更新与 Git 提交合并为一个自动化动作）

* **行为规范：**
* **文档快照：** 自动读取本次修改的核心逻辑，静默更新项目根目录下的架构记忆文件（如 `agent.md`, `gemini.md` 等），确保 AI 的全局上下文不过期。
* **总结与清理：** 读取并删除 `current_plan.md`（开发完毕，清理现场），总结用户的原始需求和最终实现的偏差。
* **规范化 Commit：** 遵循 Angular 规范（如 `feat:`, `fix:`, `refactor:`），生成结构清晰的 commit message。包含标题、改动点列表和关联的需求。
* **自动提交（可选）：** 询问用户是否直接执行 `git add . && git commit -m "..."`。
