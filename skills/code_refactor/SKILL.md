---
name: code_refactor
description: 识别并清理代码坏味道，保持行为一致地完成重构。
metadata:
  short-description: 代码重构与净化
---

# Skill: code_refactor

## Goal
在功能可用后进行结构化重构，降低维护成本并提升代码质量。

## Hard Rules
- 先审查后改动，先列问题再给方案。
- 禁止功能性扩写，聚焦可维护性与可读性。
- 保持行为一致，避免引入回归。

## Input
- 待重构代码范围
- 相关测试或验收标准

## Workflow
1. 代码审查：列出 Code Smells。
2. 制定重构点：低风险优先、逐项落地。
3. 执行清理：死代码、未使用变量、重复逻辑、冗余注释。
4. 结构优化：抽公共函数/组件，收敛职责边界。
5. 交互调优：防抖/节流、加载体验、动画平滑度（适用时）。
6. 回归验证并给出前后对比。

## Smell Checklist
- 过长函数或组件
- 复制粘贴逻辑
- 魔法数字/硬编码
- 隐式副作用
- 无意义注释与死代码

## Output Template
```md
## 重构前问题
1. ...
2. ...

## 重构动作
- [清理] ...
- [抽取] ...
- [优化] ...

## 重构后收益
- 可读性: ...
- 可维护性: ...
- 性能/交互: ...

## 风险与验证
- 风险: ...
- 验证: ...
```

## Done Criteria
- 明确列出“前后对比”。
- 没有新增功能性需求。
- 关键路径已回归验证。
